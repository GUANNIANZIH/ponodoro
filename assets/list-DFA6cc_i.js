import{p as Q,m as re,k as we,l as Pe,q as Z,c as V,v as ee,h as n,x as j,y as J,M as ke,I as le,E as ae,z as Fe,A as pe,B as Re,C as Se,D as Be,F as Te,G as $e,H as De,r as S,J as Ee,K as Le,L as Oe,w as Ae,N as We,O as Me,P as Ne,Q as Ue,R as D,S as G,T as Ke,U as qe,W as je,X as ze,Y as He,Z as Xe,_ as Ye,n as de,$ as Ge,s as Je,d as W,e as Qe,f as $,V as Ze,a0 as ce,i as m,a1 as U,a2 as fe,u as K,t as ve,j as q}from"./index-A9V8uMeT.js";import{u as et}from"./list-BGKTJV2y.js";import{V as X,a as tt}from"./VRow--bEZziLp.js";import{V as nt,m as lt,u as ye,a as at,b as it,c as me,d as he}from"./VInput-D-LJ440O.js";class ie{constructor(s){let{x:a,y:o,width:t,height:l}=s;this.x=a,this.y=o,this.width=t,this.height=l}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function ot(e){const s=e.getBoundingClientRect(),a=getComputedStyle(e),o=a.transform;if(o){let t,l,r,c,v;if(o.startsWith("matrix3d("))t=o.slice(9,-1).split(/, /),l=+t[0],r=+t[5],c=+t[12],v=+t[13];else if(o.startsWith("matrix("))t=o.slice(7,-1).split(/, /),l=+t[0],r=+t[3],c=+t[4],v=+t[5];else return new ie(s);const f=a.transformOrigin,h=s.x-c-(1-l)*parseFloat(f),y=s.y-v-(1-r)*parseFloat(f.slice(f.indexOf(" ")+1)),x=l?s.width/l:e.offsetWidth+1,C=r?s.height/r:e.offsetHeight+1;return new ie({x:h,y,width:x,height:C})}else return new ie(s)}function st(e,s,a){if(typeof e.animate>"u")return{finished:Promise.resolve()};let o;try{o=e.animate(s,a)}catch{return{finished:Promise.resolve()}}return typeof o.finished>"u"&&(o.finished=new Promise(t=>{o.onfinish=()=>{t(o)}})),o}const rt="cubic-bezier(0.4, 0, 0.2, 1)",ut=Q({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...re(),...we({transition:{component:Pe}})},"VCounter"),dt=Z()({name:"VCounter",functional:!0,props:ut(),setup(e,s){let{slots:a}=s;const o=V(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ee(()=>n(ke,{transition:e.transition},{default:()=>[j(n("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[a.default?a.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[J,e.active]])]})),{}}}),ct=Q({floating:Boolean,...re()},"VFieldLabel"),Y=Z()({name:"VFieldLabel",props:ct(),setup(e,s){let{slots:a}=s;return ee(()=>n(nt,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},a)),{}}}),ft=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],be=Q({appendInnerIcon:le,bgColor:String,clearable:Boolean,clearIcon:{type:le,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:le,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ft.includes(e)},"onClick:clear":ae(),"onClick:appendInner":ae(),"onClick:prependInner":ae(),...re(),...Fe(),...pe(),...Re()},"VField"),xe=Z()({name:"VField",inheritAttrs:!1,props:{id:String,...lt(),...be()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:a,emit:o,slots:t}=s;const{themeClasses:l}=Se(e),{loaderClasses:r}=Be(e),{focusClasses:c,isFocused:v,focus:f,blur:h}=ye(e),{InputIcon:y}=at(e),{roundedClasses:x}=Te(e),{rtlClasses:C}=$e(),k=V(()=>e.dirty||e.active),u=V(()=>!e.singleLine&&!!(e.label||t.label)),B=De(),i=V(()=>e.id||`input-${B}`),I=V(()=>`${i.value}-messages`),z=S(),M=S(),H=S(),d=V(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:w,backgroundColorStyles:P}=Ee(Le(e,"bgColor")),{textColorClasses:F,textColorStyles:te}=Oe(V(()=>e.error||e.disabled?void 0:k.value&&v.value?e.color:e.baseColor));Ae(k,g=>{if(u.value){const b=z.value.$el,p=M.value.$el;requestAnimationFrame(()=>{const R=ot(b),_=p.getBoundingClientRect(),N=_.x-R.x,L=_.y-R.y-(R.height/2-_.height/2),O=_.width/.75,A=Math.abs(O-R.width)>1?{maxWidth:We(O)}:void 0,Ce=getComputedStyle(b),ue=getComputedStyle(p),_e=parseFloat(Ce.transitionDuration)*1e3||150,Ve=parseFloat(ue.getPropertyValue("--v-field-label-scale")),Ie=ue.getPropertyValue("color");b.style.visibility="visible",p.style.visibility="hidden",st(b,{transform:`translate(${N}px, ${L}px) scale(${Ve})`,color:Ie,...A},{duration:_e,easing:rt,direction:g?"normal":"reverse"}).finished.then(()=>{b.style.removeProperty("visibility"),p.style.removeProperty("visibility")})})}},{flush:"post"});const E=V(()=>({isActive:k,isFocused:v,controlRef:H,blur:h,focus:f}));function ne(g){g.target!==document.activeElement&&g.preventDefault()}function T(g){var b;g.key!=="Enter"&&g.key!==" "||(g.preventDefault(),g.stopPropagation(),(b=e["onClick:clear"])==null||b.call(e,new MouseEvent("click")))}return ee(()=>{var N,L,O;const g=e.variant==="outlined",b=!!(t["prepend-inner"]||e.prependInnerIcon),p=!!(e.clearable||t.clear),R=!!(t["append-inner"]||e.appendInnerIcon||p),_=()=>t.label?t.label({...E.value,label:e.label,props:{for:i.value}}):e.label;return n("div",G({class:["v-field",{"v-field--active":k.value,"v-field--appended":R,"v-field--center-affix":e.centerAffix??!d.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":b,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!_(),[`v-field--variant-${e.variant}`]:!0},l.value,w.value,c.value,r.value,x.value,C.value,e.class],style:[P.value,e.style],onClick:ne},a),[n("div",{class:"v-field__overlay"},null),n(Me,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:t.loader}),b&&n("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&n(y,{key:"prepend-icon",name:"prependInner"},null),(N=t["prepend-inner"])==null?void 0:N.call(t,E.value)]),n("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&u.value&&n(Y,{key:"floating-label",ref:M,class:[F.value],floating:!0,for:i.value,style:te.value},{default:()=>[_()]}),n(Y,{ref:z,for:i.value},{default:()=>[_()]}),(L=t.default)==null?void 0:L.call(t,{...E.value,props:{id:i.value,class:"v-field__input","aria-describedby":I.value},focus:f,blur:h})]),p&&n(Ne,{key:"clear"},{default:()=>[j(n("div",{class:"v-field__clearable",onMousedown:A=>{A.preventDefault(),A.stopPropagation()}},[n(Ue,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[t.clear?t.clear({...E.value,props:{onKeydown:T,onFocus:f,onBlur:h,onClick:e["onClick:clear"]}}):n(y,{name:"clear",onKeydown:T,onFocus:f,onBlur:h},null)]})]),[[J,e.dirty]])]}),R&&n("div",{key:"append",class:"v-field__append-inner"},[(O=t["append-inner"])==null?void 0:O.call(t,E.value),e.appendInnerIcon&&n(y,{key:"append-icon",name:"appendInner"},null)]),n("div",{class:["v-field__outline",F.value],style:te.value},[g&&n(D,null,[n("div",{class:"v-field__outline__start"},null),u.value&&n("div",{class:"v-field__outline__notch"},[n(Y,{ref:M,floating:!0,for:i.value},{default:()=>[_()]})]),n("div",{class:"v-field__outline__end"},null)]),d.value&&u.value&&n(Y,{ref:M,floating:!0,for:i.value},{default:()=>[_()]})])])}),{controlRef:H}}});function vt(e){const s=Object.keys(xe.props).filter(a=>!Ke(a)&&a!=="class"&&a!=="style");return qe(e,s)}const oe=Symbol("Forwarded refs");function se(e,s){let a=e;for(;a;){const o=Reflect.getOwnPropertyDescriptor(a,s);if(o)return o;a=Object.getPrototypeOf(a)}}function mt(e){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return e[oe]=a,new Proxy(e,{get(t,l){if(Reflect.has(t,l))return Reflect.get(t,l);if(!(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))){for(const r of a)if(r.value&&Reflect.has(r.value,l)){const c=Reflect.get(r.value,l);return typeof c=="function"?c.bind(r.value):c}}},has(t,l){if(Reflect.has(t,l))return!0;if(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))return!1;for(const r of a)if(r.value&&Reflect.has(r.value,l))return!0;return!1},set(t,l,r){if(Reflect.has(t,l))return Reflect.set(t,l,r);if(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))return!1;for(const c of a)if(c.value&&Reflect.has(c.value,l))return Reflect.set(c.value,l,r);return!1},getOwnPropertyDescriptor(t,l){var c;const r=Reflect.getOwnPropertyDescriptor(t,l);if(r)return r;if(!(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))){for(const v of a){if(!v.value)continue;const f=se(v.value,l)??("_"in v.value?se((c=v.value._)==null?void 0:c.setupState,l):void 0);if(f)return f}for(const v of a){const f=v.value&&v.value[oe];if(!f)continue;const h=f.slice();for(;h.length;){const y=h.shift(),x=se(y.value,l);if(x)return x;const C=y.value&&y.value[oe];C&&h.push(...C)}}}}})}const ht=["color","file","time","date","datetime-local","week","month"],gt=Q({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...it(),...be()},"VTextField"),ge=Z()({name:"VTextField",directives:{Intersect:je},inheritAttrs:!1,props:gt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:a,emit:o,slots:t}=s;const l=ze(e,"modelValue"),{isFocused:r,focus:c,blur:v}=ye(e),f=V(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),h=V(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),y=V(()=>["plain","underlined"].includes(e.variant));function x(d,w){var P,F;!e.autofocus||!d||(F=(P=w[0].target)==null?void 0:P.focus)==null||F.call(P)}const C=S(),k=S(),u=S(),B=V(()=>ht.includes(e.type)||e.persistentPlaceholder||r.value||e.active);function i(){var d;u.value!==document.activeElement&&((d=u.value)==null||d.focus()),r.value||c()}function I(d){o("mousedown:control",d),d.target!==u.value&&(i(),d.preventDefault())}function z(d){i(),o("click:control",d)}function M(d){d.stopPropagation(),i(),de(()=>{l.value=null,Ge(e["onClick:clear"],d)})}function H(d){var P;const w=d.target;if(l.value=w.value,(P=e.modelModifiers)!=null&&P.trim&&["text","search","password","tel","url"].includes(e.type)){const F=[w.selectionStart,w.selectionEnd];de(()=>{w.selectionStart=F[0],w.selectionEnd=F[1]})}}return ee(()=>{const d=!!(t.counter||e.counter!==!1&&e.counter!=null),w=!!(d||t.details),[P,F]=He(a),{modelValue:te,...E}=me.filterProps(e),ne=vt(e);return n(me,G({ref:C,modelValue:l.value,"onUpdate:modelValue":T=>l.value=T,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":y.value},e.class],style:e.style},P,E,{centerAffix:!y.value,focused:r.value}),{...t,default:T=>{let{id:g,isDisabled:b,isDirty:p,isReadonly:R,isValid:_}=T;return n(xe,G({ref:k,onMousedown:I,onClick:z,"onClick:clear":M,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},ne,{id:g.value,active:B.value||p.value,dirty:p.value||e.dirty,disabled:b.value,focused:r.value,error:_.value===!1}),{...t,default:N=>{let{props:{class:L,...O}}=N;const A=j(n("input",G({ref:u,value:l.value,onInput:H,autofocus:e.autofocus,readonly:R.value,disabled:b.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:i,onBlur:v},O,F),null),[[Xe("intersect"),{handler:x},null,{once:!0}]]);return n(D,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[n("span",{class:"v-text-field__prefix__text"},[e.prefix])]),t.default?n("div",{class:L,"data-no-activator":""},[t.default(),A]):Ye(A,{class:L}),e.suffix&&n("span",{class:"v-text-field__suffix"},[n("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:w?T=>{var g;return n(D,null,[(g=t.details)==null?void 0:g.call(t,T),d&&n(D,null,[n("span",null,null),n(dt,{active:e.persistentCounter||r.value,value:f.value,max:h.value,disabled:e.disabled},t.counter)])])}:void 0})}),mt({},C,k,u)}}),yt=m("h1",{class:"text-center"},"代辦事項",-1),bt=m("thead",null,[m("tr",null,[m("th",null,"名稱"),m("th",null,"操作")])],-1),xt=m("h1",{class:"text-center"},"完成事項",-1),Ct=m("thead",null,[m("tr",null,[m("th",null,"名稱"),m("th",null,"操作")])],-1),Pt={__name:"list",setup(e){const s=et(),{addItem:a,editItem:o,delItem:t,cancelEditItem:l,confirmEditItem:r}=s,{items:c,finishedItems:v}=Je(s),f=S(""),h=S(null),y=S([]),x={required:u=>!!u||"欄位必填",length:u=>u.length>=3||"必須三個字以上"},C=async()=>{const u=await h.value.validate();console.log(u),!(u.length>0)&&(a(f.value),h.value.reset())},k=async(u,B)=>{(await y.value[B].validate()).length>0||r(u)};return(u,B)=>(W(),Qe(Ze,null,{default:$(()=>[n(tt,null,{default:$(()=>[n(X,{cols:"12"},{default:$(()=>[yt]),_:1}),n(X,{cols:"12"},{default:$(()=>[n(ge,{variant:"outlined",label:"新增事項",clearable:"","append-icon":"mdi-plus",onKeydown:ce(C,["enter"]),"onClick:append":C,modelValue:f.value,"onUpdate:modelValue":B[0]||(B[0]=i=>f.value=i),rules:[x.required,x.length],ref_key:"newItemTextField",ref:h},null,8,["modelValue","rules"]),n(he,null,{default:$(()=>[bt,m("tbody",null,[(W(!0),U(D,null,fe(K(c),i=>(W(),U("tr",{key:i.id},[m("td",null,[j(m("span",null,ve(i.name),513),[[J,!i.edit]]),j(n(ge,{modelValue:i.model,"onUpdate:modelValue":I=>i.model=I,rules:[x.required,x.length],autofocus:"",onKeydown:ce(I=>k(i.id,u.i),["enter"]),ref_for:!0,ref_key:"editItemTextField",ref:y},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[J,i.edit]])]),m("td",null,[i.edit?(W(),U(D,{key:1},[n(q,{icon:"mdi-check",onClick:I=>k(i.id,u.i)},null,8,["onClick"]),n(q,{icon:"mdi-undo",onClick:I=>K(l)(i.id)},null,8,["onClick"])],64)):(W(),U(D,{key:0},[n(q,{icon:"mdi-pencil",onClick:I=>K(o)(i.id)},null,8,["onClick"]),n(q,{icon:"mdi-delete",onClick:I=>K(t)(i.id)},null,8,["onClick"])],64))])]))),128))])]),_:1})]),_:1}),n(X,{cols:"12"},{default:$(()=>[xt]),_:1}),n(X,{cols:"12"},{default:$(()=>[n(he,null,{default:$(()=>[Ct,m("tbody",null,[(W(!0),U(D,null,fe(K(v),i=>(W(),U("tr",{key:i.id},[m("td",null,ve(i.name),1),m("td",null,[n(q,{icon:"mdi-delete",onClick:I=>u.delFinishItem(i.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Pt as default};
